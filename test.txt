

# Record audio for wake word detection
if self.record_wake_word_check():
    # Transcribe and check for wake word
    transcript = self.transcribe_audio(WAKE_WORD_AUDIO)
    
    if transcript and self.detect_wake_word(transcript):

Change to add volume pre-check:

# Record audio for wake word detection
if self.record_wake_word_check():
    # Pre-check audio volume before transcription (optimization)
    try:
        audio_data, sample_rate = sf.read(WAKE_WORD_AUDIO)
        rms = np.sqrt(np.mean(audio_data**2))
        
        # Only transcribe if audio is loud enough (above 2x silence threshold)
        if rms > SILENCE_THRESHOLD * 2:
            # Transcribe and check for wake word
            transcript = self.transcribe_audio(WAKE_WORD_AUDIO)
            
            if transcript and self.detect_wake_word(transcript):
        else:
            self.emit_log(f"Audio too quiet (RMS: {rms:.4f}), skipping transcription", 'debug')
    except Exception as e:
        self.emit_log(f"Error pre-checking audio volume: {e}", 'error')

Additional Optimization (Optional)

You might also want to add a minimum volume threshold constant at the top of your file for easier tuning:

# Add this with other constants
WAKE_WORD_VOLUME_THRESHOLD = SILENCE_THRESHOLD * 2  # Minimum volume for wake word detection

Then use it in the pre-filter:

pythonif rms > WAKE_WORD_VOLUME_THRESHOLD:

