

# Test the cam utility (this is the modern libcamera tool)
echo "=== Testing cam utility ==="

# List available cameras
cam --list

# Get detailed info about cameras
cam --list-properties

# Try to capture a frame to test if camera works
echo "Testing camera capture..."
cam --camera=0 --capture=1 --file=test_frame.bin

# Check if file was created
if [ -f "test_frame.bin" ]; then
    echo "✅ Camera capture successful! File created: $(ls -la test_frame.bin)"
else
    echo "❌ Camera capture failed"
fi

# Try with different camera index if 0 doesn't work
if [ ! -f "test_frame.bin" ]; then
    echo "Trying camera index 1..."
    cam --camera=1 --capture=1 --file=test_frame.bin
fi

# Get more detailed camera information
echo "=== Camera Details ==="
cam --camera=0 --list-controls 2>/dev/null || echo "Camera 0 not available"
cam --camera=1 --list-controls 2>/dev/null || echo "Camera 1 not available"










