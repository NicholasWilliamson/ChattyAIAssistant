Thank you ChatGPT.

I ran (chatty-venv) nickspi5@raspberrypi1:~/Chatty_AI $ ls -l ./piper
total 32884
-rw-r--r-- 1 nickspi5 nickspi5    33872 Nov 15  2023 espeak-ng
drwxr-xr-x 4 nickspi5 nickspi5     4096 Nov 15  2023 espeak-ng-data
lrwxrwxrwx 1 nickspi5 nickspi5       17 Nov 15  2023 libespeak-ng.so -> libespeak-ng.so.1
lrwxrwxrwx 1 nickspi5 nickspi5       24 Nov 15  2023 libespeak-ng.so.1 -> libespeak-ng.so.1.52.0.1
-rw-r--r-- 1 nickspi5 nickspi5   625120 Nov 15  2023 libespeak-ng.so.1.52.0.1
lrwxrwxrwx 1 nickspi5 nickspi5       24 Nov 15  2023 libonnxruntime.so -> libonnxruntime.so.1.14.1
-rw-r--r-- 1 nickspi5 nickspi5 15020224 Nov 15  2023 libonnxruntime.so.1.14.1
lrwxrwxrwx 1 nickspi5 nickspi5       23 Nov 15  2023 libpiper_phonemize.so -> libpiper_phonemize.so.1
lrwxrwxrwx 1 nickspi5 nickspi5       27 Nov 15  2023 libpiper_phonemize.so.1 -> libpiper_phonemize.so.1.2.0
-rw-r--r-- 1 nickspi5 nickspi5  1269392 Nov 15  2023 libpiper_phonemize.so.1.2.0
-rw-r--r-- 1 nickspi5 nickspi5 10261536 Nov 15  2023 libtashkeel_model.ort
-rwxr-xr-x 1 nickspi5 nickspi5  5283040 Nov 15  2023 piper
-rwxr-xr-x 1 nickspi5 nickspi5  1155888 Nov 15  2023 piper_phonemize
drwxr-xr-x 2 nickspi5 nickspi5     4096 Nov 15  2023 pkgconfig
(chatty-venv) nickspi5@raspberrypi1:~/Chatty_AI $ sudo chown nickspi5:nickspi5 ./piper/piper
(chatty-venv) nickspi5@raspberrypi1:~/Chatty_AI $ chmod +x ./piper/piper
(chatty-venv) nickspi5@raspberrypi1:~/Chatty_AI $ ./piper/piper --help

usage: ./piper/piper [options]

options:
   -h        --help              show this message and exit
   -m  FILE  --model       FILE  path to onnx model file
   -c  FILE  --config      FILE  path to model config file (default: model path + .json)
   -f  FILE  --output_file FILE  path to output WAV file ('-' for stdout)
   -d  DIR   --output_dir  DIR   path to output directory (default: cwd)
   --output_raw                  output raw audio to stdout as it becomes available
   -s  NUM   --speaker     NUM   id of speaker (default: 0)
   --noise_scale           NUM   generator noise (default: 0.667)
   --length_scale          NUM   phoneme length (default: 1.0)
   --noise_w               NUM   phoneme width noise (default: 0.8)
   --sentence_silence      NUM   seconds of silence after each sentence (default: 0.2)
   --espeak_data           DIR   path to espeak-ng data directory
   --tashkeel_model        FILE  path to libtashkeel onnx model (arabic)
   --json-input                  stdin input is lines of JSON instead of plain text
   --debug                       print DEBUG messages to the console
   -q       --quiet              disable logging

(chatty-venv) nickspi5@raspberrypi1:~/Chatty_AI $ python3 test_tts.py
Traceback (most recent call last):
  File "/home/nickspi5/Chatty_AI/test_tts.py", line 17, in <module>
    subprocess.run(command)
  File "/usr/lib/python3.11/subprocess.py", line 548, in run
    with Popen(*popenargs, **kwargs) as process:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/subprocess.py", line 1024, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "/usr/lib/python3.11/subprocess.py", line 1901, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
PermissionError: [Errno 13] Permission denied: './piper'

I then changed "./piper", to be "./piper/piper", in my test_tts.py script:

test_tts.py
import subprocess

VOICE = "/home/nickspi5/Chatty_AI/voices/en_US-amy-low/en_US-amy-low.onnx"
CONFIG = "/home/nickspi5/Chatty_AI/voices/en_US-amy-low/en_US-amy-low.json"
TEXT = "Hello Nick, this is a test of Piper text to speech on your Raspberry Pi 5"
OUTPUT = "output.wav"

# Run Piper
command = [
    "./piper/piper",
    "--model", VOICE,
    "--config", CONFIG,
    "--output_file", OUTPUT,
    "--sentence", TEXT
]

subprocess.run(command)

I then ran: (chatty-venv) nickspi5@raspberrypi1:~/Chatty_AI $ python3 test_tts.py
terminate called after throwing an instance of 'nlohmann::json_abi_v3_11_2::detail::parse_error'
  what():  [json.exception.parse_error.101] parse error at line 1, column 1: syntax error while parsing value - invalid literal; last read: 'E'
(chatty-venv) nickspi5@raspberrypi1:~/Chatty_AI $ 

How can I fix this error?





